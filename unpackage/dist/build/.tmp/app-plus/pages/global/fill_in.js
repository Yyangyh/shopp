(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/global/fill_in"],{1485:function(t,e,n){"use strict";(function(t){n("fc5f"),n("921b");a(n("66fd"));var e=a(n("3c3b"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("6e42")["createPage"])},"251c":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=(t._self._c,t.__map(t.additional_data,function(e,n){var a=t.__map(e.ResourceOrderExtendInfoItemList,function(e,n){var a=String(e.ResourceOrderExtendInfoItemID);return{$orig:t.__get_orig(e),m0:a}});return{$orig:t.__get_orig(e),l0:a}}));t.$mp.data=Object.assign({},{$root:{l1:n}})},r=[];n.d(e,"a",function(){return a}),n.d(e,"b",function(){return r})},"2a42":function(t,e,n){},"2ddd":function(t,e,n){"use strict";(function(t,a){function r(t){return l(t)||o(t)||i()}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function o(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function l(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=function(){return Promise.all([n.e("common/vendor"),n.e("components/uni-calendar/uni-calendar")]).then(n.bind(null,"2241"))},d=function(){return n.e("pages/common/returns").then(n.bind(null,"641d"))},c={components:{uniCalendar:s,returns:d},data:function(){var t;return t={title:"订单填写",id:"",scen_id:"",chiose_time:"",data:"",max_num:"",buy_num:1,default_news:"",Arr_news:[],taker_name:"",taker_pho:"",additional_data:"",current:0,buy_show:99,buy_date:"",arr_date:"",other_time:"",startDate:"",endDate:""},u(t,"chiose_time",""),u(t,"sure_date",""),u(t,"buy_selected",[]),t},methods:{open:function(){this.$refs.calendar.open()},confirm:function(e){console.log(t(e," at pages\\global\\fill_in.vue:186"));var n=[],r=!0,i=!1,o=void 0;try{for(var l,u=this.sure_date[Symbol.iterator]();!(r=(l=u.next()).done);r=!0){var s=l.value;n.push(s.Date)}}catch(d){i=!0,o=d}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}-1!=n.indexOf(e.fulldate)?(this.other_time=e.month+"月"+e.date+"日",this.chiose_time=e.fulldate,this.buy_show=3):a.showToast({icon:"none",title:"该时间段暂无票可售，请重新选择"})},buy_chiose_date:function(t){""!=this.arr_date[t].Price&&(this.buy_show=t,this.chiose_time=this.arr_date[t].date)},emption:function(){if(""!=this.chiose_time)if(""!=this.taker_name&&""!=this.taker_pho){var e=[],n=!0,r=!1,i=void 0;try{for(var o,l=this.Arr_news[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var u=o.value,s={},d=!0,c=!1,f=void 0;try{for(var h,v=u[Symbol.iterator]();!(d=(h=v.next()).done);d=!0){var _=h.value;if("证件类型"==_.name&&0==_.type_index)return void a.showToast({icon:"none",title:"游客信息不能为空"});"身份证"==_.value&&(s.IdCardType=1),"证件号"==_.name&&(s.IdCardNo=_.value),"姓名"==_.name&&(s.Cname=_.value),"联系电话"==_.name&&(s.ContactInfo=_.value)}}catch(V){c=!0,f=V}finally{try{d||null==v.return||v.return()}finally{if(c)throw f}}e.push(s)}}catch(V){r=!0,i=V}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}for(var m=0;m<e.length;m++)for(var y=e[m],p=Object.values(y),g=0;g<p.length;g++){var b=p[g];if(""==b)return void a.showToast({icon:"none",title:"游客信息不能为空"})}var w={id:this.scen_id,ResourceID:this.id,UseDate:this.chiose_time,Quantity:this.buy_num,order_no:this.order,detail_id:this.detail_id,contact_info:{Name:this.taker_name,Mobile:this.taker_pho}};if(w.passener_info_list=e,""!=this.additional_data){var x=[];console.log(t(this.additional_data," at pages\\global\\fill_in.vue:273"));var I=!0,D=!1,A=void 0;try{for(var T,O=this.additional_data[Symbol.iterator]();!(I=(T=O.next()).done);I=!0){var R=T.value,S={};if(1==R.Type||3==R.Type){var L=[],P={};P.id=R.Arr[R.Arr_index].id,P.content="",L.push(P),S.id=R.ResourceOrderExtendInfoID,S.items=L}else if(2==R.Type){var E=[],k=!0,C=!1,j=void 0;try{for(var M,N=R.arr_value[Symbol.iterator]();!(k=(M=N.next()).done);k=!0){var $=M.value,J={};J.id=$,J.content="",E.push(J)}}catch(V){C=!0,j=V}finally{try{k||null==N.return||N.return()}finally{if(C)throw j}}S.id=R.ResourceOrderExtendInfoID,S.items=E}else if(4==R.Type){var F=[],Q={id:0};Q.content=R.text_value,F.push(Q),S.id=R.ResourceOrderExtendInfoID,S.items=F}x.push(S)}}catch(V){D=!0,A=V}finally{try{I||null==O.return||O.return()}finally{if(D)throw A}}for(var Y=0;Y<x.length;Y++){var U=x[Y];if(""==U.items)return void a.showToast({icon:"none",title:"附加信息不能为空"});var q=!0,z=!1,B=void 0;try{for(var G,H=U.items[Symbol.iterator]();!(q=(G=H.next()).done);q=!0){var K=G.value;if((0==K.id||void 0==K.id)&&""==K.content)return void a.showToast({icon:"none",title:"附加信息不能为空"})}}catch(V){z=!0,B=V}finally{try{q||null==H.return||H.return()}finally{if(z)throw B}}}w.ItemAddInfo=x}else w.ItemAddInfo=[];console.log(t(w," at pages\\global\\fill_in.vue:330")),this.service.entire(this,"post",this.service.api_root.global.use_ctrip,w,function(e,n){console.log(t(n," at pages\\global\\fill_in.vue:333")),a.showToast({icon:"none",title:n.msg}),0==n.code&&setTimeout(function(){e.common.returns(e)},1500)})}else a.showToast({icon:"none",title:"取票人信息不能为空"});else a.showToast({icon:"none",title:"请选择使用日期"})},bindPickerChange:function(t,e){this.Arr_news[e][0].type_index=t.target.value,this.Arr_news[e][0].value=this.Arr_news[e][0].type[t.target.value]},bindInput:function(t,e,n){this.Arr_news[e][n].value=t.target.value},chiosePicker:function(t,e){this.additional_data[e].Arr_index=t.target.value,this.additional_data=JSON.parse(JSON.stringify(this.additional_data))},checkboxChange:function(t,e){this.additional_data[e].arr_value=r(t.target.value)},addInput:function(t,e){this.additional_data[e].text_value=t.target.value}},onLoad:function(e){this.detail_id=e.detail_id,this.order=e.order;var n=new Date,a=n.getFullYear(),r=n.getMonth()+1,i=n.getDate();r<10&&(r="0"+r),i<10&&(i="0"+i);var o=a+"-"+r+"-"+i;function l(t,e){void 0!=e&&""!=e||(e=1);t=new Date(t);t.setDate(t.getDate()+e);var n=t.getMonth()+1,a=t.getDate();return t.getFullYear()+"-"+u(n)+"-"+u(a)}function u(t){if(void 0==t||""==t)return"";var e=t+"";return e.length<2&&(e="0"+e),e}function s(t){var e=t.split("-");return e=e[1]+"月"+e[2]+"日",e}var d=[{show_date:r+"月"+i+"日",name:"今天",date:o,Price:""},{show_date:s(l(o,1)),name:"明天",date:l(o,1),Price:""},{show_date:s(l(o,2)),name:"后天",date:l(o,2),Price:""}];this.arr_date=d,this.startDate=l(o,3),this.endDate=l(o,30);var c=l(o,30);console.log(t(this.arr_date," at pages\\global\\fill_in.vue:446")),this.scen_id=e.spot_id,this.id=e.id,this.service.entire(this,"get",this.service.api_root.subindex.scen_ConfirmDetail,{ResourceIDList:e.id,end_date:c},function(e,n){var a=n.data.date.ResourceList[0].DateList,r=!0,i=!1,o=void 0;try{for(var l,u=a[Symbol.iterator]();!(r=(l=u.next()).done);r=!0){var s=l.value,d={};s.Date=e.common.Test(s.Date),d.date=s.Date,d.info="￥"+s.Price,e.buy_selected.push(d);var c=!0,f=!1,h=void 0;try{for(var v,_=e.arr_date[Symbol.iterator]();!(c=(v=_.next()).done);c=!0){var m=v.value;s.Date==m.date&&(m.Price="￥"+s.Price)}}catch(A){f=!0,h=A}finally{try{c||null==_.return||_.return()}finally{if(f)throw h}}}}catch(A){i=!0,o=A}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}e.sure_date=a,e.data=n.data.info.ResourceList[0],e.max_num=n.data.info.ResourceList[0].MaxQuantity,console.log(t(n.data.information.ResourceList[0].CustomerInfoItemList," at pages\\global\\fill_in.vue:476"));var y=n.data.information.ResourceList[0].CustomerInfoItemList,p=[];y.forEach(function(t,e){var n={};1==t.Model&&(n.value="",n.name=t.Name,"证件类型"==n.name?(n.type=["请选择","身份证"],n.type_index=0,p.unshift(n)):p.push(n))}),e.default_news=JSON.stringify(p),e.Arr_news.push(p),e.additional_data=n.data.info.ResourceList[0].ResourceOrderExtendInfoList;var g=!0,b=!1,w=void 0;try{for(var x,I=e.additional_data[Symbol.iterator]();!(g=(x=I.next()).done);g=!0){var D=x.value;1==D.Type||3==D.Type?function(){var t=[{text:"请选择"}];D.ResourceOrderExtendInfoItemList.forEach(function(e,n){var a={};a.text=e.Content,a.text_value="",a.id=e.ResourceOrderExtendInfoItemID,t.push(a)}),D.Arr_index=0,D.Arr=t}():4==D.Type?D.text_value="":2==D.Type&&(D.arr_value=[])}}catch(A){b=!0,w=A}finally{try{g||null==I.return||I.return()}finally{if(b)throw w}}console.log(t(e.additional_data," at pages\\global\\fill_in.vue:521")),console.log(t(e.Arr_news," at pages\\global\\fill_in.vue:522"))})}};e.default=c}).call(this,n("0de9")["default"],n("6e42")["default"])},"3c3b":function(t,e,n){"use strict";n.r(e);var a=n("251c"),r=n("9449");for(var i in r)"default"!==i&&function(t){n.d(e,t,function(){return r[t]})}(i);n("c9ae");var o=n("2877"),l=Object(o["a"])(r["default"],a["a"],a["b"],!1,null,"5ea7bf1d",null);e["default"]=l.exports},9449:function(t,e,n){"use strict";n.r(e);var a=n("2ddd"),r=n.n(a);for(var i in a)"default"!==i&&function(t){n.d(e,t,function(){return a[t]})}(i);e["default"]=r.a},c9ae:function(t,e,n){"use strict";var a=n("2a42"),r=n.n(a);r.a}},[["1485","common/runtime","common/vendor"]]]);